# Using the BitPay Go Client Library
## Prerequisites
You must have a BitPay merchant account to use this library.  It's free to [sign-up for a BitPay merchant account](https://bitpay.com/start).

Once you have a BitPay merchant account, you will need [a working BitPay Access Token](/api/getting-access.html) â€“ this can be done either [via the library](#pairing) or manually in [the BitPay Dashboard](https://bitpay.com/tokens).

## Quick Start
### Installation
```bash
go get github.com/bitpay/bitpay-go

Read the documentation on [godoc](http://godoc.org/github.com/bitpay/bitpay-go)
```

### Configuration
The bitpay client creates a cryptographically secure connection to your server by pairing an API code with keys generated by the library. The client can be initialized with pre-existing keys, or with pre-existing keys and a pre-existing token.

## Pairing
Most calls to the BitPay REST API require that your client is paired with the bitpay.com server.  To pair with bitpay.com you need to have an approved merchant account.

Your client can be paired via the `pos` (point-of-sale) facade.  The `pos` facade allows for invoices to be created and retrieved.

_For development or quick deployment purposes, consider the [BitPay Go Command-Line Interface](https://github.com/philosodad/bitpay-go-cli) to simplify the deployment process_

### Pairing Programatically

If you are developing a client with built-in pairing capability, you can pair programattically.

    `*Client.PairWithCode(<pairing code>)` will complete a server-initiated pairing, when provided a pre-generated pairing code from https://bitpay.com/dashboard/merchant/api-tokens.  In this case, the `pos` facade will be automatically assigned.

The example below demonstrates this, assuming that the bitpay-go client is imported as `gc` and the key\_utils as `ku`, and that the user has retrieved a code and assigned it to the variable `pairingcode`.

```go
pemString := ku.GeneratePem()
apiUri := "https://bitpay.com" 
webClient := Client{ApiUri: apiUri, Pem: pemString} 
token := webClient.PairWithCode(pairingCode) 
webClient.Token = token
```    

### Create a new bitcoin invoice
Once you have paired the client as above, you can use the client to create invoices:

```go
invoice := webClient.CreateInvoice(123.00, "USD")
```

This returns an invoice type struct.

### Get invoice status
The go library provides one method for fetching an existing invoice:

```go
client.GetInvoice('PvVhgBfA7wKPWhuVC24rJo')
```

## Testnet Usage

During development and testing, take advantage of the [Bitcoin TestNet](https://en.bitcoin.it/wiki/Testnet) by creating a client with the ApiUri value "https://test.bitpay.com" 

Note that in order to pair with testnet, you will need a pairing code from test.bitpay.com.

## API Documentation

API Documentation is available on the [BitPay site](https://bitpay.com/api).

